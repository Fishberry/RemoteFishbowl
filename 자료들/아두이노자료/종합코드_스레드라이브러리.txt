#include <mthread.h>

class FooThread : public Thread
{
public:
    FooThread(int id);
protected:
    bool loop();
private:
    int id;
};
 
FooThread::FooThread(int id)
{
    this->id = id;
}
 
bool FooThread::loop()
{
 
    // Die if requested:
    if(kill_flag)
        return false;
 
    // Print the status message:
    Serial.print("FooThread ");
    Serial.print(id);
    Serial.println(" called.");
 
    // Sleep for one second:
    sleep(1);
    return true;
 
}
 
void setup()
{
 
    // Create five threads and add them to the main ThreadList:
    for(int i = 1; i <= 5; i++)
        main_thread_list->add_thread(new FooThread(i));
 
    // Initialize the serial connection:
    Serial.begin(9600);
    delay(1000);
 
}